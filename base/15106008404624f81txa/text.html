<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html><head><meta name="qrichtext" content="1" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><style type="text/css">
p, li { white-space: pre-wrap; }
</style></head><body style=" font-family:'DejaVu Sans'; font-size:11pt; font-weight:400; font-style:normal;">
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Программа узнает о нажатиях клавиш посредством сообщений, которые посылаются оконной процедуре. </p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">На  самом  деле  все  происходит  не  столь  просто: <br />1) когда  пользователь  нажимает  и  отпускает  клавиши,  драйвер клавиатуры  передает  информацию  о  нажатии  клавиш  в Windows.<br />2) Windows сохраняет  эту  информацию (в  виде сообщений)  в  системной  очереди  сообщений.<br />3) Затем  она  передает  сообщения  клавиатуры,  по  одному  за  раз,  в очередь сообщений программы, содержащей окно, имеющее &quot;фокус ввода&quot; (input focus).<br />4) Затем программа отправляет сообщения соответствующей оконной процедуре.<br /></p>
<p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Смысл этого двухступенчатого процесса — сохранение сообщений в системной очереди сообщений, и дальнейшая их  передача  в  очередь  сообщений  приложения — в  синхронизации.  Если  пользователь  печатает  на  клавиатуре быстрее,  чем  программа  может  обрабатывать  поступающую  информацию, Windows сохраняет  информацию  о дополнительных  нажатиях  клавиш  в  системной  очереди  сообщений,  поскольку  одно  из  этих  дополнительных нажатий может быть переключением фокуса ввода на другую программу. Информацию о последующих нажатиях следует  затем  направлять  в  другую  программу. Таким образом Windows корректно синхронизирует такие сообщения клавиатуры. </p>
<p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p></body></html>